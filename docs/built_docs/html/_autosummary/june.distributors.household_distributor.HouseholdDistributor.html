
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>june.distributors.household_distributor.HouseholdDistributor &#8212; JUNE  documentation</title>
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="june.distributors.school_distributor.SchoolDistributor" href="june.distributors.school_distributor.SchoolDistributor.html" />
    <link rel="prev" title="june.distributors.hospital_distributor.HospitalDistributor" href="june.distributors.hospital_distributor.HospitalDistributor.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../index.html">
          <span>JUNE  documentation</span></a></h1>
        <h2 class="heading"><span>june.distributors.household_distributor.HouseholdDistributor</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="june.distributors.hospital_distributor.HospitalDistributor.html">june.distributors.hospital_distributor.HospitalDistributor</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="june.distributors.school_distributor.SchoolDistributor.html">june.distributors.school_distributor.SchoolDistributor</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <div class="section" id="june-distributors-household-distributor-householddistributor">
<h1>june.distributors.household_distributor.HouseholdDistributor<a class="headerlink" href="#june-distributors-household-distributor-householddistributor" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">june.distributors.household_distributor.</code><code class="sig-name descname">HouseholdDistributor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">first_kid_parent_age_differences</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">second_kid_parent_age_differences</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">couples_age_differences</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">number_of_random_numbers</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">kid_max_age</span><span class="o">=</span><span class="default_value">17</span></em>, <em class="sig-param"><span class="n">student_min_age</span><span class="o">=</span><span class="default_value">18</span></em>, <em class="sig-param"><span class="n">student_max_age</span><span class="o">=</span><span class="default_value">25</span></em>, <em class="sig-param"><span class="n">old_min_age</span><span class="o">=</span><span class="default_value">65</span></em>, <em class="sig-param"><span class="n">old_max_age</span><span class="o">=</span><span class="default_value">99</span></em>, <em class="sig-param"><span class="n">adult_min_age</span><span class="o">=</span><span class="default_value">18</span></em>, <em class="sig-param"><span class="n">adult_max_age</span><span class="o">=</span><span class="default_value">64</span></em>, <em class="sig-param"><span class="n">young_adult_min_age</span><span class="o">=</span><span class="default_value">18</span></em>, <em class="sig-param"><span class="n">young_adult_max_age</span><span class="o">=</span><span class="default_value">35</span></em>, <em class="sig-param"><span class="n">max_age_to_be_parent</span><span class="o">=</span><span class="default_value">64</span></em>, <em class="sig-param"><span class="n">max_household_size</span><span class="o">=</span><span class="default_value">8</span></em>, <em class="sig-param"><span class="n">allowed_household_compositions</span><span class="p">:</span> <span class="n">dict</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span></dt>
<dd><p>Tool to populate areas with households and fill them with the correct
composition based on census data. The most important function is
“distribute_people_to_households” which takes people in an area
and fills them into households.</p>
<dl class="simple">
<dt>first_kid_parent_age_differences:</dt><dd><p>dictionary where keys are the age differences between a mother and
her FIRST kid. The values are the probabilities of each age difference.</p>
</dd>
<dt>second_kid_parent_age_differences:</dt><dd><p>dictionary where keys are the age differences between a mother and
her SECOND kid. The values are the probabilities of
each age difference.</p>
</dd>
<dt>couples_age_differences:</dt><dd><p>dictionary where keys are the age differences between a woman and
a man at the time of marriage. A value of 20 means that the man
is 20 years older than the woman. The values are the probabilities
of each age difference.</p>
</dd>
<dt>number_of_random_numbers:</dt><dd><p>Number of random numbers required. This should be set to the
number of people living in the area, minimum.</p>
</dd>
</dl>
<dl class="py method">
<dt>
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">first_kid_parent_age_differences</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">second_kid_parent_age_differences</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">couples_age_differences</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">number_of_random_numbers</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">kid_max_age</span><span class="o">=</span><span class="default_value">17</span></em>, <em class="sig-param"><span class="n">student_min_age</span><span class="o">=</span><span class="default_value">18</span></em>, <em class="sig-param"><span class="n">student_max_age</span><span class="o">=</span><span class="default_value">25</span></em>, <em class="sig-param"><span class="n">old_min_age</span><span class="o">=</span><span class="default_value">65</span></em>, <em class="sig-param"><span class="n">old_max_age</span><span class="o">=</span><span class="default_value">99</span></em>, <em class="sig-param"><span class="n">adult_min_age</span><span class="o">=</span><span class="default_value">18</span></em>, <em class="sig-param"><span class="n">adult_max_age</span><span class="o">=</span><span class="default_value">64</span></em>, <em class="sig-param"><span class="n">young_adult_min_age</span><span class="o">=</span><span class="default_value">18</span></em>, <em class="sig-param"><span class="n">young_adult_max_age</span><span class="o">=</span><span class="default_value">35</span></em>, <em class="sig-param"><span class="n">max_age_to_be_parent</span><span class="o">=</span><span class="default_value">64</span></em>, <em class="sig-param"><span class="n">max_household_size</span><span class="o">=</span><span class="default_value">8</span></em>, <em class="sig-param"><span class="n">allowed_household_compositions</span><span class="p">:</span> <span class="n">dict</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span></dt>
<dd><p>Tool to populate areas with households and fill them with the correct
composition based on census data. The most important function is
“distribute_people_to_households” which takes people in an area
and fills them into households.</p>
<dl class="simple">
<dt>first_kid_parent_age_differences:</dt><dd><p>dictionary where keys are the age differences between a mother and
her FIRST kid. The values are the probabilities of each age difference.</p>
</dd>
<dt>second_kid_parent_age_differences:</dt><dd><p>dictionary where keys are the age differences between a mother and
her SECOND kid. The values are the probabilities of
each age difference.</p>
</dd>
<dt>couples_age_differences:</dt><dd><p>dictionary where keys are the age differences between a woman and
a man at the time of marriage. A value of 20 means that the man
is 20 years older than the woman. The values are the probabilities
of each age difference.</p>
</dd>
<dt>number_of_random_numbers:</dt><dd><p>Number of random numbers required. This should be set to the
number of people living in the area, minimum.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_add_to_household</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">household</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.groups.household.html#june.groups.household.Household" title="june.groups.household.Household">june.groups.household.Household</a></span></em>, <em class="sig-param"><span class="n">person</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.demography.person.html#june.demography.person.Person" title="june.demography.person.Person">june.demography.person.Person</a></span></em>, <em class="sig-param"><span class="n">subgroup</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None</dt>
<dd><p>Adds person to household and assigns them the correct subgroup.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_check_if_age_dict_is_empty</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">people_dict</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">age</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; bool</dt>
<dd><p>Given a people_dict that contains a list of people for each age, it deletes the
age key if the number of people of that age is 0.</p>
<dl class="simple">
<dt>people_dict:</dt><dd><p>dictionary with age as keys and list of people of that age as values.</p>
</dd>
<dt>age:</dt><dd><p>age to check if empty.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_check_if_household_is_full</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">household</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.groups.household.html#june.groups.household.Household" title="june.groups.household.Household">june.groups.household.Household</a></span></em><span class="sig-paren">)</span></dt>
<dd><p>Checks if a household is full or has the maximum household size allowed by the Distributor.</p>
<dl class="simple">
<dt>household:</dt><dd><p>the household to check.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_check_if_oldpeople_left</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">men_by_age</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">women_by_age</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span> &#x2192; bool</dt>
<dd><p>Checks whether there are still old people without an allocated household.</p>
<blockquote>
<div><dl class="simple">
<dt>area:</dt><dd><p>the area to check.</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_create_household</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">area</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.geography.geography.html#june.geography.geography.Area" title="june.geography.geography.Area">june.geography.geography.Area</a></span></em>, <em class="sig-param"><span class="n">type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_household_size</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">inf</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="june.groups.household.html#june.groups.household.Household" title="june.groups.household.Household">june.groups.household.Household</a></dt>
<dd><p>Creates household in the area.</p>
<dl class="simple">
<dt>area: </dt><dd><p>Area in which to create the household.</p>
</dd>
<dt>communal:</dt><dd><p>Whether it is a communal establishment (True) or not (False).</p>
</dd>
<dt>max_household_size:</dt><dd><p>Maximum number of people allowed in the household.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_create_people_dicts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">area</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.geography.geography.html#june.geography.geography.Area" title="june.geography.geography.Area">june.geography.geography.Area</a></span></em><span class="sig-paren">)</span></dt>
<dd><p>Creates dictionaries with the men and women per age key living in the area.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_find_household_for_kid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">priority_lists</span></em><span class="sig-paren">)</span></dt>
<dd><p>Finds a suitable household for a kid. It first tries to search for a place in priority_lists[0],
then 1, etc.</p>
<dl class="simple">
<dt>priority_lists:</dt><dd><p>list of lists of households. The list should be sorted according to priority allocation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_find_household_for_nonkid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">priority_lists</span></em><span class="sig-paren">)</span></dt>
<dd><p>Finds a suitable household for a person over 18 years old (who can live alone).
It first tries to search for a place in priority_lists[0], then 1, etc.</p>
<dl class="simple">
<dt>priority_lists:</dt><dd><p>list of lists of households. The list should be sorted according to priority allocation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_get_closest_person_of_age</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">first_dict</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">second_dict</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">age</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">min_age</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">max_age</span><span class="o">=</span><span class="default_value">100</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="june.demography.person.html#june.demography.person.Person" title="june.demography.person.Person">june.demography.person.Person</a></dt>
<dd><p>Tries to find the person with the closest age in first dict inside the min_age and max_age.
If it fails, it looks into the second_dict. If it fails again it returns None.</p>
<dl class="simple">
<dt>first_dict:</dt><dd><p>dictionary with lists of people by age as keys. This is the first dictionary to look for a suitable person.</p>
</dd>
<dt>second_dict:</dt><dd><p>dictionary with lists of people by age as keys. This is the second dictionary to look for a suitable person.</p>
</dd>
<dt>age:</dt><dd><p>the target age of the person.</p>
</dd>
<dt>min_age:</dt><dd><p>minimum age the person should have.</p>
</dd>
<dt>max_age:</dt><dd><p>maximum age the person should have.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_get_matching_parent</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kid</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.demography.person.html#june.demography.person.Person" title="june.demography.person.Person">june.demography.person.Person</a></span></em>, <em class="sig-param"><span class="n">men_by_age</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">women_by_age</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="june.demography.person.html#june.demography.person.Person" title="june.demography.person.Person">june.demography.person.Person</a></dt>
<dd><p>Given a person under 18 years old (strictly), it finds a matching mother with an age
difference sampled for the known mother-firstkid age distribution read in the 
__init__ function.</p>
<dl class="simple">
<dt>kid:</dt><dd><p>The person to look a parent for.</p>
</dd>
<dt>men_by_age</dt><dd><p>men left to allocate by age key</p>
</dd>
<dt>women_by_age</dt><dd><p>women left to allocate by age key</p>
</dd>
<dt>area:</dt><dd><p>The area in which to look for a parent.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_get_matching_partner</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">person</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.demography.person.html#june.demography.person.Person" title="june.demography.person.Person">june.demography.person.Person</a></span></em>, <em class="sig-param"><span class="n">men_by_age</span></em>, <em class="sig-param"><span class="n">women_by_age</span></em>, <em class="sig-param"><span class="n">under_65</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">over_65</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="june.demography.person.html#june.demography.person.Person" title="june.demography.person.Person">june.demography.person.Person</a></dt>
<dd><p>Given a person, it finds a suitable partner with similar age and opposite sex. 
The age difference is sampled from an observed distribution of age differences 
in couples in the US and the UK, and it read by __init__. We first try to look
for a female parent, as it is more common to have a single mother than a single
father.</p>
<dl class="simple">
<dt>person:</dt><dd><p>the person instance to find a partner for.</p>
</dd>
<dt>men_by_age</dt><dd><p>men left to allocate by age key</p>
</dd>
<dt>women_by_age</dt><dd><p>women left to allocate by age key</p>
</dd>
<dt>area:</dt><dd><p>the area where to look for a partner.</p>
</dd>
<dt>under_65:</dt><dd><p>whether to restrict the search for a partner under 65 years old.</p>
</dd>
<dt>over_65:</dt><dd><p>whether to restrict the search for a partner over 65 years old.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_get_matching_second_kid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parent</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.demography.person.html#june.demography.person.Person" title="june.demography.person.Person">june.demography.person.Person</a></span></em>, <em class="sig-param"><span class="n">men_by_age</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">women_by_age</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="june.demography.person.html#june.demography.person.Person" title="june.demography.person.Person">june.demography.person.Person</a></dt>
<dd><p>Given a parent, it finds a person under 18 years old with an age difference matching
the distribution of age difference between a mother and their second kid.</p>
<dl class="simple">
<dt>parent:</dt><dd><p>the parent (usually mother) to match with her second kid.</p>
</dd>
<dt>men_by_age</dt><dd><p>men left to allocate by age key</p>
</dd>
<dt>women_by_age</dt><dd><p>women left to allocate by age key</p>
</dd>
<dt>area:</dt><dd><p>area in which to look for the kid.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_get_random_person_in_age_bracket</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">men_by_age</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">women_by_age</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">min_age</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">max_age</span><span class="o">=</span><span class="default_value">100</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="june.demography.person.html#june.demography.person.Person" title="june.demography.person.Person">june.demography.person.Person</a></dt>
<dd><p>Returns a random person of random sex within the specified age bracket (inclusive).</p>
<dl class="simple">
<dt>men_by_age</dt><dd><p>men left to allocate by age key</p>
</dd>
<dt>women_by_age</dt><dd><p>women left to allocate by age key</p>
</dd>
<dt>area:</dt><dd><p>The area to look at.</p>
</dd>
<dt>min_age:</dt><dd><p>The minimum age the person should have.</p>
</dd>
<dt>max_age:</dt><dd><p>The maximum age the person should have.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_refresh_random_numbers_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">1000</span></em><span class="sig-paren">)</span> &#x2192; None</dt>
<dd><p>Samples one million age differences for couples and parents-kids. Sampling in batches makes the code much faster. They are converted to lists so they can be popped.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">_remove_household_from_all_lists</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">household</span></em>, <em class="sig-param"><span class="n">lists</span><span class="p">:</span> <span class="n">list</span></em><span class="sig-paren">)</span> &#x2192; None</dt>
<dd><p>Removes the given households from all the lists in lists.</p>
<dl class="simple">
<dt>household</dt><dd><p>an instance of Household.</p>
</dd>
<dt>lists</dt><dd><p>list of lists of households.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">distribute_people_and_households_to_areas</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">areas</span><span class="p">:</span> <span class="n">List<span class="p">[</span><a class="reference internal" href="june.geography.geography.html#june.geography.geography.Area" title="june.geography.geography.Area">june.geography.geography.Area</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">number_households_per_composition_filename</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">PosixPath('/home/sadie/JUNE/data/input/households/household_composition_ew.csv')</span></em>, <em class="sig-param"><span class="n">n_students_filename</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">PosixPath('/home/sadie/JUNE/data/input/households/n_students_ew.csv')</span></em>, <em class="sig-param"><span class="n">n_people_in_communal_filename</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">PosixPath('/home/sadie/JUNE/data/input/households/n_communal_ew.csv')</span></em><span class="sig-paren">)</span></dt>
<dd><p>Distributes households and people into households for the given areas list.
The households are stored in area.households.</p>
<dl class="simple">
<dt>areas</dt><dd><p>list of instances of Area</p>
</dd>
<dt>number_households_per_composition_filename</dt><dd><p>path to the data file containing the number of households per household composition per area</p>
</dd>
<dt>n_students_filename</dt><dd><p>path to file containing the number of students per area</p>
</dd>
<dt>n_people_in_communal_filename</dt><dd><p>path to file containing the number of people living in communal establishments per area</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">distribute_people_to_households</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">men_by_age</span></em>, <em class="sig-param"><span class="n">women_by_age</span></em>, <em class="sig-param"><span class="n">area</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.geography.geography.html#june.geography.geography.Area" title="june.geography.geography.Area">june.geography.geography.Area</a></span></em>, <em class="sig-param"><span class="n">number_households_per_composition</span><span class="p">:</span> <span class="n">list</span></em>, <em class="sig-param"><span class="n">n_students</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">n_people_in_communal</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="june.groups.household.html#june.groups.household.Households" title="june.groups.household.Households">june.groups.household.Households</a></dt>
<dd><p>Given a populated output area, it distributes the people to households. 
The instance of the Area class, area, should have two dictionary attributes, 
<code class="docutils literal notranslate"><span class="pre">men_by_age</span></code> and <code class="docutils literal notranslate"><span class="pre">women_by_age</span></code>. The keys of the dictionaries are the ages 
and the values are the Person instances. The process of creating these dictionaries
is done in people_distributor.py.
The <code class="docutils literal notranslate"><span class="pre">number_households_per_composition</span></code> argument is a dictionary containing the 
number of households per each composition. We obtain this from the nomis dataset and 
should be read by the inputs class in the world init.</p>
<dl class="simple">
<dt>area:</dt><dd><p>area from which to take people and distribute households.</p>
</dd>
<dt>number_households_per_composition:</dt><dd><p>dictionary containing the different possible household compositions and the number of 
households with that composition as key.
Example:
The area E00062207 has this configuration:
number_households_per_composition = {
“0 0 0 0 1”           :   15
“0 0 0 1 0”           :   20
“0 0 0 0 2”           :   11
“0 0 0 2 0”           :   24
“1 0 &gt;=0 2 0”         :   12
“&gt;=2 0 &gt;=0 2 0”       :    9
“0 0 &gt;=1 2 0”         :    6
“1 0 &gt;=0 1 0”         :    5
“&gt;=2 0 &gt;=0 1 0”       :    3
“0 0 &gt;=1 1 0”         :    7
“1 0 &gt;=0 &gt;=1 &gt;=0”     :    0
“&gt;=2 0 &gt;=0 &gt;=1 &gt;=0”   :    1
“0 &gt;=1 0 0 0”         :    0
“0 0 0 0 &gt;=2”         :    0
“0 0 &gt;=0 &gt;=0 &gt;=0”     :    1
“&gt;=0 &gt;=0 &gt;=0 &gt;=0 &gt;=0” :    0
}
The encoding follows the rule “1 2 3 4 5” = 1 kid, 2 students (that live in student households), 3 young adults, 4 adults, and 5 old people.</p>
</dd>
<dt>n_students:</dt><dd><p>the number of students living this area.</p>
</dd>
<dt>n_people_in_communal:</dt><dd><p>the number of people living in communal establishments in this area.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">fill_all_communal_establishments</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">men_by_age</span></em>, <em class="sig-param"><span class="n">women_by_age</span></em>, <em class="sig-param"><span class="n">n_establishments</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">n_people_in_communal</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">area</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.geography.geography.html#june.geography.geography.Area" title="june.geography.geography.Area">june.geography.geography.Area</a></span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="june.groups.household.html#june.groups.household.Household" title="june.groups.household.Household">june.groups.household.Household</a><span class="p">]</span></dt>
<dd><p>Fils all comunnal establishments with the remaining people that have not been allocated somewhere else.</p>
<dl class="simple">
<dt>n_establishments:</dt><dd><p>number of communal establishments.</p>
</dd>
<dt>n_people_in_communal:</dt><dd><p>number of people in each communal establishment</p>
</dd>
<dt>area:</dt><dd><p>the area in which to put the household</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">fill_all_student_households</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">men_by_age</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">women_by_age</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">area</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.geography.geography.html#june.geography.geography.Area" title="june.geography.geography.Area">june.geography.geography.Area</a></span></em>, <em class="sig-param"><span class="n">n_students</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">student_houses_number</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="june.groups.household.html#june.groups.household.Household" title="june.groups.household.Household">june.groups.household.Household</a><span class="p">]</span></dt>
<dd><p>Creates and fills all student households with people in the appropriate age bin (18-25 by default).</p>
<dl class="simple">
<dt>area:</dt><dd><p>The area in which to create and fill the households.</p>
</dd>
<dt>n_students:</dt><dd><p>Number of students in this area. Found in the NOMIS data.</p>
</dd>
<dt>student_houses_number:</dt><dd><p>Number of student houses in this area.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">fill_families_households</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">men_by_age</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">women_by_age</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">n_households</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">kids_per_house</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">parents_per_house</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">old_per_house</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">area</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.geography.geography.html#june.geography.geography.Area" title="june.geography.geography.Area">june.geography.geography.Area</a></span></em>, <em class="sig-param"><span class="n">max_household_size</span><span class="o">=</span><span class="default_value">inf</span></em>, <em class="sig-param"><span class="n">extra_people_lists</span><span class="o">=</span><span class="default_value">()</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="june.groups.household.html#june.groups.household.Household" title="june.groups.household.Household">june.groups.household.Household</a><span class="p">]</span></dt>
<dd><dl class="simple">
<dt>Creates and fills households with families. The strategy is the following:</dt><dd><ul class="simple">
<li><p>Put the first kid in the household.</p></li>
<li><p>Find a parent for the kid based on the age difference between parents and their first kid.</p></li>
<li><p>Find a partner for the first parent, based on age differences at time of marriage.</p></li>
<li><p>Add a second kid using the age difference with the mother.</p></li>
<li><p>Fill an extra old person if necessary for multigenerational families.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>area:</dt><dd><p>The area in which to create and fill the households.</p>
</dd>
<dt>n_households:</dt><dd><p>Number of households.</p>
</dd>
<dt>kids_per_house:</dt><dd><p>Number of kids (&lt;18) in the house.</p>
</dd>
<dt>old_per_house:</dt><dd><p>Number of old people in the house.</p>
</dd>
<dt>extra_people_lists:</dt><dd><p>Tuple of lists where the created households will be added to be used
later to allocate unallocated people.</p>
</dd>
<dt>max_household_size:</dt><dd><p>The maximum size of the created households.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">fill_nokids_households</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">men_by_age</span></em>, <em class="sig-param"><span class="n">women_by_age</span></em>, <em class="sig-param"><span class="n">adults_per_household</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">n_households</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">area</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.geography.geography.html#june.geography.geography.Area" title="june.geography.geography.Area">june.geography.geography.Area</a></span></em>, <em class="sig-param"><span class="n">extra_people_lists</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">max_household_size</span><span class="o">=</span><span class="default_value">inf</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="june.groups.household.html#june.groups.household.Household" title="june.groups.household.Household">june.groups.household.Household</a><span class="p">]</span></dt>
<dd><p>Fils households with one or two adults.</p>
<dl class="simple">
<dt>adults_per_household:</dt><dd><p>number of adults to fill in the household can be one or two.</p>
</dd>
<dt>n_households:</dt><dd><p>number of households with this configuration</p>
</dd>
<dt>area:</dt><dd><p>the area in which to put the household</p>
</dd>
<dt>extra_people_lists:</dt><dd><p>whether to include the created households in a list for extra people to be put in.</p>
</dd>
<dt>max_household_size:</dt><dd><p>maximum size of the created households.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">fill_oldpeople_households</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">men_by_age</span></em>, <em class="sig-param"><span class="n">women_by_age</span></em>, <em class="sig-param"><span class="n">people_per_household</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">n_households</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">area</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.geography.geography.html#june.geography.geography.Area" title="june.geography.geography.Area">june.geography.geography.Area</a></span></em>, <em class="sig-param"><span class="n">extra_people_lists</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">max_household_size</span><span class="o">=</span><span class="default_value">inf</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="june.groups.household.html#june.groups.household.Household" title="june.groups.household.Household">june.groups.household.Household</a><span class="p">]</span></dt>
<dd><p>Creates and fills households with old people.</p>
<dl class="simple">
<dt>area:</dt><dd><p>The area in which to create and fill the households.</p>
</dd>
<dt>n_households:</dt><dd><p>Number of households.</p>
</dd>
<dt>extra_people_lists:</dt><dd><p>Tuple of lists where the created households will be added to be used
later to allocate unallocated people.</p>
</dd>
<dt>max_household_size:</dt><dd><p>The maximum size of the created households.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">fill_random_people_to_existing_households</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">men_by_age</span></em>, <em class="sig-param"><span class="n">women_by_age</span></em>, <em class="sig-param"><span class="n">households_with_extra_kids</span><span class="p">:</span> <span class="n">list</span></em>, <em class="sig-param"><span class="n">households_with_kids</span><span class="p">:</span> <span class="n">list</span></em>, <em class="sig-param"><span class="n">households_with_extra_youngadults</span><span class="p">:</span> <span class="n">list</span></em>, <em class="sig-param"><span class="n">households_with_extra_adults</span><span class="p">:</span> <span class="n">list</span></em>, <em class="sig-param"><span class="n">households_with_extra_oldpeople</span><span class="p">:</span> <span class="n">list</span></em>, <em class="sig-param"><span class="n">all_households</span><span class="p">:</span> <span class="n">list</span></em><span class="sig-paren">)</span> &#x2192; None</dt>
<dd><p>The people that have not been associated a household yet are distributed in the following way.
Given the lists in the arguments, we assign each age group according to this preferences:
Kids -&gt; households_with_extra_kids, households_with_kids, any
Young adults -&gt; households_with_extra_youngadults, households_with_adults, any
Adults -&gt; households_with_extra_adults, any
Old people -&gt; households_with_extra_oldpeople, any.</p>
<p>When we allocate someone to any house, we prioritize the houses that have a small
number of people (less than the max_household_size parameter defined in the __init__)</p>
<dl class="simple">
<dt>men_by_age</dt><dd><p>dictionary with men left to allocate by age key.</p>
</dd>
<dt>women_by_age</dt><dd><p>dictionary with women left to allocate by age key.</p>
</dd>
<dt>number_to_fill</dt><dd><p>number of remaining people to distribute into spare households.</p>
</dd>
<dt>households_with_extra_kids</dt><dd><p>list of households that take extra kids.</p>
</dd>
<dt>households_with_kids</dt><dd><p>list of households that already have kids.</p>
</dd>
<dt>households_with_extra_youngadults</dt><dd><p>list of households that take extra young adults.</p>
</dd>
<dt>households_with_extra_oldpeople</dt><dd><p>list of households that take extra old people</p>
</dd>
<dt>area</dt><dd><p>area where households are.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">fill_youngadult_households</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">men_by_age</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">women_by_age</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">youngadults_per_household</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">n_households</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">area</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.geography.geography.html#june.geography.geography.Area" title="june.geography.geography.Area">june.geography.geography.Area</a></span></em>, <em class="sig-param"><span class="n">extra_people_lists</span><span class="o">=</span><span class="default_value">()</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="june.groups.household.html#june.groups.household.Household" title="june.groups.household.Household">june.groups.household.Household</a><span class="p">]</span></dt>
<dd><p>Fils households with young adults (18 to 35) years old.</p>
<dl class="simple">
<dt>youngadults_per_household:</dt><dd><p>number of adults to fill in the household. Can be any positive number.</p>
</dd>
<dt>n_households:</dt><dd><p>number of households with this configuration</p>
</dd>
<dt>area:</dt><dd><p>the area in which to put the household</p>
</dd>
<dt>extra_people_lists:</dt><dd><p>whether to include the created households in a list for extra people to be put in.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">fill_youngadult_with_parents_households</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">men_by_age</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">women_by_age</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">adults_per_household</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">n_households</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">area</span><span class="p">:</span> <span class="n"><a class="reference internal" href="june.geography.geography.html#june.geography.geography.Area" title="june.geography.geography.Area">june.geography.geography.Area</a></span></em>, <em class="sig-param"><span class="n">extra_people_lists</span><span class="o">=</span><span class="default_value">()</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="june.groups.household.html#june.groups.household.Household" title="june.groups.household.Household">june.groups.household.Household</a><span class="p">]</span></dt>
<dd><p>Fils households with one young adult (18 to 35) and one or two adults.</p>
<dl class="simple">
<dt>youngadults_per_household:</dt><dd><p>number of adults to fill in the household. Can be one or two.</p>
</dd>
<dt>n_households:</dt><dd><p>number of households with this configuration</p>
</dd>
<dt>area:</dt><dd><p>the area in which to put the household</p>
</dd>
<dt>extra_people_lists:</dt><dd><p>whether to include the created households in a list for extra people to be put in.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">classmethod </em><code class="sig-name descname">from_df</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">husband_wife_df</span><span class="p">:</span> <span class="n">pandas.core.frame.DataFrame</span></em>, <em class="sig-param"><span class="n">parent_child_df</span><span class="p">:</span> <span class="n">pandas.core.frame.DataFrame</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="june.distributors.household_distributor.html#june.distributors.household_distributor.HouseholdDistributor" title="june.distributors.household_distributor.HouseholdDistributor">june.distributors.household_distributor.HouseholdDistributor</a></dt>
<dd><p>Initializes a household distributor from dataframes. If they are not specified they are assumed to be in the default
location.</p>
<dl class="simple">
<dt>husband_wife_filename:</dt><dd><p>Dataframe containing as index the age differences between wife and husband (relative to the wife)
and one column with the probability of that age difference.</p>
</dd>
<dt>parent_child_filename:</dt><dd><p>Dataframe containing as index the age differences between a mother and her kids.
The first and second columns must contain the probabilities for the first and second kid respectively.</p>
</dd>
<dt>Keyword Arguments:</dt><dd><p>Any extra argument that is taken by the __init__ of HouseholdDistributor.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">husband_wife_filename</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">PosixPath('/home/sadie/JUNE/data/input/households/couples_age_difference.csv')</span></em>, <em class="sig-param"><span class="n">parent_child_filename</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">PosixPath('/home/sadie/JUNE/data/input/households/parent_kid_age_difference.csv')</span></em>, <em class="sig-param"><span class="n">config_filename</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">PosixPath('/home/sadie/JUNE/configs/defaults/distributors/household_distributor.yaml')</span></em>, <em class="sig-param"><span class="n">number_of_random_numbers</span><span class="o">=</span><span class="default_value">1000</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="june.distributors.household_distributor.html#june.distributors.household_distributor.HouseholdDistributor" title="june.distributors.household_distributor.HouseholdDistributor">june.distributors.household_distributor.HouseholdDistributor</a></dt>
<dd><p>Initializes a household distributor from file. If they are not specified they are assumed to be in the default
location.</p>
<dl class="simple">
<dt>husband_wife_filename:</dt><dd><p>Path of the CSV file containing in one column the age differences between
wife and husband (relative to the wife) and in the second columns the 
probability of that age difference.</p>
</dd>
<dt>parent_child_filename:</dt><dd><p>Path of the CSV file containing in one column the age differences between a 
mother and her kids. The second and third columns must contain the probabilities
for the first and second kid respectively.</p>
</dd>
<dt>config_filename:</dt><dd><p>Path of the config file defining the different age groups.</p>
</dd>
<dt>number_of_random_numbers:</dt><dd><p>Number of random numbers to initialize. This should be equal to the number of
people in the area we want to put households in.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="june.distributors.hospital_distributor.HospitalDistributor.html">june.distributors.hospital_distributor.HospitalDistributor</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="june.distributors.school_distributor.SchoolDistributor.html">june.distributors.school_distributor.SchoolDistributor</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, IDAS-Durham.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>